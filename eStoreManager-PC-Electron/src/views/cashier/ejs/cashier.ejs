<%- include('../../shared/ejs/header', {title: 'Cashier'}) %>
<link rel="stylesheet" type="text/css" href="../css/cashier.css">
<link rel="stylesheet" href="../../../../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">

<%- include('../../shared/ejs/secondary_menu.ejs') %>

<div class="container-fluid main-container">
	<div class="row" style="padding-top: 2rem;">
		<div class="col-sm-1">
			<img style="width: 85px; border: 1px solid #333" src="../images/barcode-scanner.jpg" alt="barcode">
		</div>
		<div class="col-sm-3">
			<div class="input-group">
				<label>Product ID&nbsp;&nbsp; </label>
				<input type="text" class="form-control">
				<div class="input-group-append">
					<button class="btn btn-success" type="button">Search</button>
				</div>
			</div>
		</div>
		<div class="col-sm-3">
			<div class="input-group">
				<label>Quantity&nbsp;&nbsp; </label>
				<input type="text" class="form-control">
			</div>
		</div>
		<div class="col-sm-3">
			<div class="input-group">
				<button type="submit" class="btn btn-primary">Add Product</button>
			</div>
		</div>
	</div>
	<div class="row" style="min-height: 350px">
		<div class="col-sm-8 mt-2">
			<table id="product-table" class="display" width="100%"></table>
		</div>
		<div id="cashier-total-area" class="col-sm-4">
			<table>
				<tr>
					<td>
						<label class="total-title">SubTotal</label>
					</td>
					<td>
						<input readonly class="total-number" type="text" class="form-control">
					</td>
				</tr>
				<tr>
					<td>
						<label class="total-title">Tax</label>
					</td>
					<td>
						<input readonly class="total-number" type="text" class="form-control">
					</td>
				</tr>
				<tr>
					<td>
						<label class="total-title">GrandTotal</label>
					</td>
					<td>
						<input readonly class="total-number" type="text" class="form-control">
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<div style="padding: 2rem"></div>
					</td>
				</tr>
				<tr>
					<td>
						<label class="total-title title-sm">Customer Pay</label>
					</td>
					<td>
						<input class="total-number" type="text" class="form-control">
					</td>
				</tr>
				<tr>
					<td>
						<label class="total-title title-sm">Give Back to Customer</label>
					</td>
					<td>
						<input readonly class="total-number" type="text" class="form-control">
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>

<div class="container-fluid" style="position:fixed; bottom: 0; left: 0;">
	<div class="row" style="padding: 1rem; background: ghostwhite">
		<div class="col-sm-2">
			<p><b>Employee:</b> Viet Anh</p>
			<p><b>Time:</b> <span id="clock"></span></p>
		</div>
		<div class="col-sm-4">
			<p><b>Customer:</b> Syan</p>
			<div class="input-group">
			<input type="text" class="form-control" placeholder="CustomerID" aria-label="CustomerID" aria-describedby="basic-addon2">
				<div class="input-group-append">
					<button class="btn btn-primary" type="button">Search</button>
					<button class="btn btn-success" type="button">New</button>
				</div>
			</div>
		</div>
		<div class="col-sm-6">
			<button class="btn btn-lg btn-warning btn-super-lg">PRINT RECEIPT</button>
			<button class="btn btn-lg btn-success btn-super-lg">COMPLETE (F9)</button>
			<button class="btn btn-lg btn-danger btn-super-lg">DISCARD</button>
		</div>
	</div>
</div>


<script>
	const EventGetter = require("../../../services/EventGetter").EventGetter;
    const {ipcRenderer} = require('electron');
	var dt = require( 'datatables.net-dt' )( window, $ );
    require( 'datatables.net-buttons-dt' )( window, $ );
	// Create table 
	dataTable = $('#product-table').DataTable({
		columns: [
			{ 
				title: "ID",
				data: "id"
			},
			{ 
				title: "Product ID",
				data: "productid"
			},
			{ 
				title: "Product Name",
				data: "productname"
			},
			{ 
				title: "Price",
				data: "price"
			},
			{ 
				title: "Quanitity",
				data: "quantity"
			},
			{ 
				title: "Total",
				data: "total"
			},
			{ 
				title: "Delete?"
			}
		],
		"columnDefs": [ {
			"targets": -1,
			"data": null,
			"defaultContent": `
				<button type="button" class="delete-employee btn btn-sm btn-danger">
					<i class="fa fa-trash-o" aria-hidden="true"></i>
				</button>
				`
		} ],
		"pageLength": 5,
		"lengthMenu": [[5, 8, 10, -1], [5, 8, 10, "All"]]
	});



	$(document).ready(() => {

		// === Setup Clock ====
		function startTimer() {
    		var today = new Date();
			var h = today.getHours();
			var m = today.getMinutes();
			var s = today.getSeconds();
			var day = today.getDate();
			var month = today.getMonth() + 1;
			m = checkTime(m);
			s = checkTime(s);
			$("#clock").html(h + ":" + m + ":" + s + "&nbsp;&nbsp;" + day + "/" + month);
			var t = setTimeout(startTimer, 500);
		}
		function checkTime(i) {
			if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
			return i;
		}
		startTimer();

	});

</script>

<%- include('../../shared/ejs/footer') %>
